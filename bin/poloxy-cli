#!/usr/bin/env ruby

require_relative '../lib/poloxy'

param = {
  name:        'foo',
  level:       3,
  group:       'Default',
  type:        :HttpPost,
  address:     'https://api.example.com/',
  message:     "Something went wrong!\nPlease check!\n",
  received_at: Time.now,
}
OptionParser.new do |opt|
  opt.on('-n', '--name=NAME')       { |n| param[:name]    = n}
  opt.on('-l', '--level=LEVEL')     { |l| param[:level]   = l}
  opt.on('-g', '--group=GROUP')     { |g| param[:group]   = g}
  opt.on('-t', '--type=TYPE')       { |t| param[:type]    = t}
  opt.on('-a', '--addr=ADDRESS')    { |a| param[:address] = a}
  opt.on('-m', '--message=MESSAGE') { |m| param[:message] = m}
  opt.parse! ARGV
end

Poloxy::DataStore.new.connect

p param

item = Poloxy::Item.new.create param
